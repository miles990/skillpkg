{
  "id": "snapshot_1767418166812_bu4pau5es",
  "approvalId": "approval_1767418166807_uldj0ton3",
  "approvalTitle": "SKILL.md 統一格式 - Requirements",
  "version": 1,
  "timestamp": "2026-01-03T05:29:26.812Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# SKILL.md 統一格式 - 需求規格\n\n## 概述\n\n統一 skillpkg 的 skill 定義格式，移除 `skill.yaml`，直接使用 `SKILL.md` 作為唯一標準格式。\n\n**核心理念：一個格式走天下，減少轉換和認知負擔。**\n\n## 問題陳述\n\n### 現況問題\n\n| 問題 | 影響 |\n|------|------|\n| 兩種格式 (skill.yaml + SKILL.md) | 增加使用者認知負擔 |\n| 需要格式轉換 | 額外的程式碼維護成本 |\n| 與業界不一致 | Claude Code / Codex 都用 SKILL.md |\n\n### 目標狀態\n\n```\n現況：skill.yaml ──轉換──► SKILL.md ──複製──► .claude/skills/\n目標：SKILL.md ─────────直接複製─────────► .claude/skills/\n```\n\n## 使用者故事\n\n### US-1: Skill 開發者\n**As a** skill 開發者\n**I want to** 直接撰寫 SKILL.md\n**So that** 我的 skill 格式與 Claude Code 一致，不需要額外轉換\n\n**驗收標準 (EARS):**\n- **E**xplicit: `skillpkg init` 產生 SKILL.md（不是 skill.yaml）\n- **A**ction: 執行 init 後產生的檔案為 SKILL.md 格式\n- **R**esult: 產生的 SKILL.md 可直接被 Claude Code 使用\n- **S**uccess: 開發者只需維護一個檔案\n\n### US-2: 專案使用者\n**As a** 專案使用者\n**I want to** 安裝 skill 時不論來源是 SKILL.md 或 skill.yaml 都能使用\n**So that** 向後相容既有的 skill 專案\n\n**驗收標準 (EARS):**\n- **E**xplicit: `skillpkg install` 可讀取 SKILL.md 或 skill.yaml\n- **A**ction: 優先讀取 SKILL.md，若無則讀取 skill.yaml\n- **R**esult: 讀取 skill.yaml 時顯示遷移提示\n- **S**uccess: 所有現有 skill 專案仍可正常使用\n\n### US-3: 既有 Skill 維護者\n**As a** 既有 skill.yaml 的維護者\n**I want to** 有工具幫我遷移到 SKILL.md\n**So that** 我不需要手動轉換格式\n\n**驗收標準 (EARS):**\n- **E**xplicit: `skillpkg migrate` 可將 skill.yaml 轉換為 SKILL.md\n- **A**ction: 執行後產生對應的 SKILL.md\n- **R**esult: 轉換後的 SKILL.md 內容完整無遺失\n- **S**uccess: 可選擇是否刪除舊的 skill.yaml\n\n## 功能需求\n\n### FR-1: skillpkg init 改用 SKILL.md\n\n```bash\nskillpkg init\n# 產生 SKILL.md（不是 skill.yaml）\n```\n\n產生的檔案格式：\n```markdown\n---\nname: my-skill\nversion: 1.0.0\ndescription: 簡短描述\n---\n\n# My Skill\n\n在這裡寫 skill 的指令...\n```\n\n### FR-2: 支援讀取雙格式\n\n```bash\nskillpkg install ./my-skill/\n```\n\n讀取優先順序：\n1. SKILL.md (新標準)\n2. skill.yaml (向後相容，顯示警告)\n\n### FR-3: 同步直接複製\n\n```bash\nskillpkg sync\n# SKILL.md 直接複製到 .claude/skills/\n# 不需要格式轉換\n```\n\n### FR-4: 遷移命令\n\n```bash\nskillpkg migrate\n# 將 skill.yaml 轉換為 SKILL.md\n\nskillpkg migrate --delete\n# 轉換後刪除 skill.yaml\n```\n\n### FR-5: GitHub 搜尋優化\n\n```bash\nskillpkg search \"code review\"\n# 優先搜尋包含 SKILL.md 的 repo\n```\n\n## 非功能需求\n\n### NFR-1: 向後相容\n- 至少一個版本週期內保留 skill.yaml 讀取能力\n- 新建 skill 一律使用 SKILL.md\n\n### NFR-2: 業界對齊\n\n| 平台 | 格式 |\n|------|------|\n| Claude Code | SKILL.md |\n| Codex | SKILL.md |\n| skillpkg (新) | SKILL.md |\n\n### NFR-3: 效能\n- 移除轉換邏輯後，sync 速度應提升\n\n## SKILL.md 格式規範\n\n### 必填欄位\n```markdown\n---\nname: skill-name        # 小寫、連字號\nversion: 1.0.0          # semver 格式\ndescription: 簡短描述    # 一行說明\n---\n```\n\n### 可選欄位\n```markdown\n---\nauthor: Your Name\ntags:\n  - productivity\n  - code-review\ntriggers:\n  - pattern: \"/review\"\n    description: \"觸發程式碼審查\"\ndependencies:\n  skills:\n    - git-helper\n  mcp:\n    - name: github\n      package: \"@anthropic/mcp-server-github\"\n---\n```\n\n## 驗收標準\n\n- [ ] `skillpkg init` 產生 SKILL.md\n- [ ] `skillpkg install` 優先讀取 SKILL.md\n- [ ] `skillpkg install` 可向後相容 skill.yaml\n- [ ] `skillpkg sync` 直接複製 SKILL.md\n- [ ] `skillpkg migrate` 可轉換格式\n- [ ] README.md 更新說明新格式\n\n## 範圍外 (Out of Scope)\n\n- 本規格不涉及 skillpkg.json 結構變更\n- 本規格不涉及 MCP 配置管理\n- 本規格不涉及專案腳手架功能\n",
  "fileStats": {
    "size": 4153,
    "lines": 179,
    "lastModified": "2026-01-03T05:29:20.721Z"
  },
  "comments": []
}